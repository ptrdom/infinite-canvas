(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(17)},17:function(e,t,n){"use strict";n.r(t);var r=n(13),o=n(11),a=n(5),u=n(2),c=n(1),i=n(3),l=n.n(i),d=n(14),s=n(7),f=n(24),m=function e(t){Object(c.a)(this,e),this.name=t};m.Mouse=new m("mouse"),m.Trackpad=new m("trackpad");var p=function e(t,n,r,o){Object(c.a)(this,e),this.id=t,this.x=n,this.y=r,this.dragging=o},g=function e(t){Object(c.a)(this,e),this.name=t};g.Up=new g("up"),g.Down=new g("down"),g.Hold=new g("hold");var b=function(){function e(t,n){Object(c.a)(this,e),this.previous=t,this.current=n}return Object(u.a)(e,[{key:"enqueue",value:function(t){return new e(this.current,t)}}]),e}();b.Initial=new b(null,g.Up);var v=function e(t,n,r){Object(c.a)(this,e),this.downEventListenerType=t,this.upEventListenerType=n,this.buttonCode=r};function w(e){var t=Object(i.useState)(b.Initial),n=Object(a.a)(t,2),r=n[0],o=n[1],u=l.a.useRef(null);return Object(i.useEffect)(function(){var t=function(t){t.button===e.buttonCode&&(o(function(e){return e.enqueue(g.Down)}),u.current||(u.current=setInterval(function(){o(function(e){return e.enqueue(g.Hold)})},100)))};return document.addEventListener(e.downEventListenerType,t),function(){return document.removeEventListener(e.downEventListenerType,t)}},[]),Object(i.useEffect)(function(){var t=function(t){t.button===e.buttonCode&&(u.current&&(clearInterval(u.current),u.current=null),o(function(e){return e.enqueue(g.Up)}))};return document.addEventListener(e.upEventListenerType,t),function(){return document.removeEventListener(e.upEventListenerType,t)}},[]),r}v.MouseLeft=new v("mousedown","mouseup",0),v.MouseRight=new v("mousedown","mouseup",2);var h=function(){var e=Object(i.useState)(function(){try{var e=localStorage.getItem("shapes");return e?JSON.parse(e).map(function(e){return Object.assign(new p,e)}):[]}catch(t){return console.warn("Failed to get shapes from localStorage, falling back to default",t),[]}}),t=Object(a.a)(e,2),n=t[0],u=t[1],c=Object(i.useState)(function(){try{var e=localStorage.getItem("viewportCoordinates");return e?JSON.parse(e):{x:0,y:0}}catch(t){return console.warn("Failed to get viewportCoordinates from localStorage, falling back to default",t),{x:0,y:0}}}),d=Object(a.a)(c,2),b=d[0],h=d[1],E=w(v.MouseLeft),y=w(v.MouseRight),O=Object(i.useState)(!1),j=Object(a.a)(O,2),x=j[0],k=j[1],S=Object(i.useState)(function(){try{var e=localStorage.getItem("controlMode");return e?m[Object.keys(m).find(function(t){return t.toLowerCase()===e})]:m.Mouse}catch(t){return console.warn("Failed to get controlMode from localStorage, falling back to default",t),m.Mouse}}),L=Object(a.a)(S,2),C=L[0],M=L[1];Object(i.useEffect)(function(){if(C===m.Trackpad){var e=function(e){h(function(t){return{x:t.x+-e.deltaX,y:t.y+-e.deltaY}})};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}},[C]),Object(i.useEffect)(function(){var e=function(e){e.preventDefault()};return document.addEventListener("contextmenu",e),function(){return document.removeEventListener("contextmenu",e)}},[]),Object(i.useEffect)(function(){k(y.current===g.Hold)},[y]),Object(i.useEffect)(function(){if(x){var e=function(e){h(function(t){return{x:t.x+e.movementX,y:t.y+e.movementY}})};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}},[x]);Object(i.useEffect)(function(){localStorage.setItem("viewportCoordinates",JSON.stringify(b))},[b]),Object(i.useEffect)(function(){localStorage.setItem("controlMode",C.name)},[C]);return Object(i.useEffect)(function(){localStorage.setItem("shapes",JSON.stringify(n))},[n]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{style:{position:"absolute",border:"1px solid black",padding:"10px",zIndex:1,backgroundColor:"white"}},"Viewport x:",b.x," y:",b.y,l.a.createElement("br",null),"Mouse left:",E.current.name," right:",y.current.name,l.a.createElement("br",null),"Canvas pan enabled:",x?"true":"false",l.a.createElement("br",null),"Control mode:",l.a.createElement("div",null,l.a.createElement("input",{type:"radio",value:m.Mouse.name,name:"control-mode",checked:C===m.Mouse,onChange:function(){return M(m.Mouse)}})," ",m.Mouse.name,l.a.createElement("input",{type:"radio",value:m.Trackpad.name,name:"control-mode",checked:C===m.Trackpad,onChange:function(){return M(m.Trackpad)}})," ",m.Trackpad.name),"Focus shape:",l.a.createElement("select",{value:"",onChange:function(e){var t=n.find(function(t){return t.id.toString()===e.target.value});if(!t)throw new Error("Failed to find shape by id.");h({x:-t.x-50+window.innerWidth/2,y:-t.y-50+window.innerHeight/2})}},l.a.createElement("option",{value:""}),n.map(function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.id)}))),l.a.createElement("div",{style:{position:"absolute",border:"1px solid black",padding:"10px",zIndex:1,top:"200px",backgroundColor:"white"}},l.a.createElement("button",{onClick:function(){return function(){var e=new p(Object(f.a)(),-b.x+window.innerWidth/2,-b.y+window.innerHeight/2,!1);u(function(t){return[].concat(Object(o.a)(t),[e])})}()}},"Add Rect")),l.a.createElement(s.d,{width:window.innerWidth-20,height:window.innerHeight-20},l.a.createElement(s.b,null,n.map(function(e){return l.a.createElement(s.a,{key:e.id,x:e.x+b.x,y:e.y+b.y,draggable:!0,onDragStart:function(){u(function(t){return t.map(function(t){return t.id===e.id?Object(r.a)({},t,{dragging:!0}):t})})},onDragEnd:function(t){u(function(n){return n.map(function(n){return n.id===e.id?Object(r.a)({},n,{dragging:!1,x:t.target.x()-b.x,y:t.target.y()-b.y}):n})})}},l.a.createElement(s.c,{width:100,height:100,fill:e.dragging?"black":"green"}),l.a.createElement(s.e,{x:25,y:100/6,text:e.id,fill:e.dragging?"green":"black",wrap:"char",width:50}))}))))};Object(d.render)(l.a.createElement(h,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.0e51cffe.chunk.js.map