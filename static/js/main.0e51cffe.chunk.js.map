{"version":3,"sources":["index.js"],"names":["ControlMode","name","Object","_home_runner_work_infinite_canvas_infinite_canvas_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","this","Mouse","Trackpad","Shape","id","x","y","dragging","KeyState","Up","Down","Hold","KeyStateHistory","previous","current","Initial","Key","downEventListenerType","upEventListenerType","buttonCode","keyState","key","_useState","useState","_useState2","_home_runner_work_infinite_canvas_infinite_canvas_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","stateHistory","setStateHistory","holdIntervalRef","React","useRef","useEffect","handler","event","button","state","enqueue","setInterval","document","addEventListener","removeEventListener","clearInterval","MouseLeft","MouseRight","App","_useState3","shapesJSON","localStorage","getItem","JSON","parse","map","shape","assign","e","console","warn","_useState4","shapes","setShapes","_useState5","viewportCoordinatesJSON","_useState6","viewportCoordinates","setViewportCoordinates","mouseLeftStateHistory","mouseRightStateHistory","_useState7","_useState8","canvasPanEnabled","setCanvasPanEnabled","_useState9","controlModeCookieValue","keys","find","controlMode","toLowerCase","_useState10","setControlMode","deltaX","deltaY","preventDefault","movementX","movementY","setItem","stringify","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","Fragment","style","position","border","padding","zIndex","backgroundColor","type","value","checked","onChange","toString","target","Error","shapeEdgeLength","window","innerWidth","innerHeight","top","onClick","uuidv4","concat","_home_runner_work_infinite_canvas_infinite_canvas_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","handleAddRect","react_konva__WEBPACK_IMPORTED_MODULE_7__","width","height","draggable","onDragStart","el","_home_runner_work_infinite_canvas_infinite_canvas_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","onDragEnd","fill","text","wrap","render","getElementById"],"mappings":"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","file":"static/js/main.0e51cffe.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { render } from \"react-dom\";\nimport { Group, Layer, Rect, Stage, Text } from \"react-konva\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nclass ControlMode {\n  static Mouse = new ControlMode(\"mouse\");\n  static Trackpad = new ControlMode(\"trackpad\");\n\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass Shape {\n  constructor(id, x, y, dragging) {\n    this.id = id;\n    this.x = x;\n    this.y = y;\n    this.dragging = dragging;\n  }\n}\n\nclass KeyState {\n  static Up = new KeyState(\"up\");\n  static Down = new KeyState(\"down\");\n  static Hold = new KeyState(\"hold\");\n\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass KeyStateHistory {\n  static Initial = new KeyStateHistory(null, KeyState.Up);\n\n  constructor(previous, current) {\n    this.previous = previous;\n    this.current = current;\n  }\n\n  enqueue(current) {\n    return new KeyStateHistory(this.current, current);\n  }\n}\n\nclass Key {\n  static MouseLeft = new Key(\"mousedown\", \"mouseup\", 0);\n  static MouseRight = new Key(\"mousedown\", \"mouseup\", 2);\n\n  constructor(downEventListenerType, upEventListenerType, buttonCode) {\n    this.downEventListenerType = downEventListenerType;\n    this.upEventListenerType = upEventListenerType;\n    this.buttonCode = buttonCode;\n  }\n}\n\nfunction keyState(key) {\n  const [stateHistory, setStateHistory] = useState(KeyStateHistory.Initial);\n  const holdIntervalRef = React.useRef(null);\n\n  const startHoldIntervalCounter = () => {\n    if (holdIntervalRef.current) return;\n    holdIntervalRef.current = setInterval(() => {\n      setStateHistory((state) => state.enqueue(KeyState.Hold));\n    }, 100);\n  };\n\n  const stopHoldIntervalCounter = () => {\n    if (holdIntervalRef.current) {\n      clearInterval(holdIntervalRef.current);\n      holdIntervalRef.current = null;\n    }\n  };\n\n  useEffect(() => {\n    const handler = (event) => {\n      if (event.button === key.buttonCode) {\n        setStateHistory((state) => state.enqueue(KeyState.Down));\n        startHoldIntervalCounter();\n      }\n    };\n    //TODO customize event listener target\n    document.addEventListener(key.downEventListenerType, handler);\n    return () =>\n      document.removeEventListener(key.downEventListenerType, handler);\n  }, []);\n\n  useEffect(() => {\n    const handler = (event) => {\n      if (event.button === key.buttonCode) {\n        stopHoldIntervalCounter();\n        setStateHistory((state) => state.enqueue(KeyState.Up));\n      }\n    };\n    //TODO customize event listener target\n    document.addEventListener(key.upEventListenerType, handler);\n    return () => document.removeEventListener(key.upEventListenerType, handler);\n  }, []);\n\n  return stateHistory;\n}\n\nconst App = () => {\n  const shapeEdgeLength = 100;\n\n  const [shapes, setShapes] = useState(() => {\n    try {\n      const shapesJSON = localStorage.getItem(\"shapes\");\n      if (shapesJSON) {\n        const shapes = JSON.parse(shapesJSON);\n        return shapes.map((shape) => Object.assign(new Shape(), shape));\n      } else {\n        return [];\n      }\n    } catch (e) {\n      console.warn(\n        \"Failed to get shapes from localStorage, falling back to default\",\n        e\n      );\n      return [];\n    }\n  });\n\n  const [viewportCoordinates, setViewportCoordinates] = useState(() => {\n    try {\n      const viewportCoordinatesJSON = localStorage.getItem(\n        \"viewportCoordinates\"\n      );\n      if (viewportCoordinatesJSON) {\n        return JSON.parse(viewportCoordinatesJSON);\n      } else {\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n    } catch (e) {\n      console.warn(\n        \"Failed to get viewportCoordinates from localStorage, falling back to default\",\n        e\n      );\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n  });\n\n  const mouseLeftStateHistory = keyState(Key.MouseLeft);\n  const mouseRightStateHistory = keyState(Key.MouseRight);\n\n  const [canvasPanEnabled, setCanvasPanEnabled] = useState(false);\n\n  //TODO add automatic detection capability\n  const [controlMode, setControlMode] = useState(() => {\n    try {\n      const controlModeCookieValue = localStorage.getItem(\"controlMode\");\n      if (controlModeCookieValue) {\n        return ControlMode[\n          Object.keys(ControlMode).find(\n            (controlMode) =>\n              controlMode.toLowerCase() === controlModeCookieValue\n          )\n        ];\n      } else {\n        return ControlMode.Mouse;\n      }\n    } catch (e) {\n      console.warn(\n        \"Failed to get controlMode from localStorage, falling back to default\",\n        e\n      );\n      return ControlMode.Mouse;\n    }\n  });\n\n  useEffect(() => {\n    if (controlMode === ControlMode.Trackpad) {\n      const handler = (event) => {\n        setViewportCoordinates((state) => ({\n          x: state.x + -event.deltaX,\n          y: state.y + -event.deltaY\n        }));\n      };\n      document.addEventListener(\"wheel\", handler);\n      return () => document.removeEventListener(\"wheel\", handler);\n    }\n  }, [controlMode]);\n\n  useEffect(() => {\n    const handler = (event) => {\n      event.preventDefault();\n    };\n    document.addEventListener(\"contextmenu\", handler);\n    return () => document.removeEventListener(\"contextmenu\", handler);\n  }, []);\n\n  useEffect(() => {\n    setCanvasPanEnabled(mouseRightStateHistory.current === KeyState.Hold);\n  }, [mouseRightStateHistory]);\n\n  useEffect(() => {\n    if (canvasPanEnabled) {\n      const handler = (event) => {\n        setViewportCoordinates((state) => ({\n          x: state.x + event.movementX,\n          y: state.y + event.movementY\n        }));\n      };\n      document.addEventListener(\"mousemove\", handler);\n      return () => document.removeEventListener(\"mousemove\", handler);\n    }\n  }, [canvasPanEnabled]);\n\n  const handleFocusShape = (event) => {\n    const shape = shapes.find(\n      (shape) => shape.id.toString() === event.target.value\n    );\n    if (!shape) {\n      throw new Error(\"Failed to find shape by id.\");\n    } else {\n      setViewportCoordinates({\n        x: -shape.x - shapeEdgeLength / 2 + window.innerWidth / 2,\n        y: -shape.y - shapeEdgeLength / 2 + window.innerHeight / 2\n      });\n    }\n  };\n\n  //TODO debounce\n  useEffect(() => {\n    localStorage.setItem(\n      \"viewportCoordinates\",\n      JSON.stringify(viewportCoordinates)\n    );\n  }, [viewportCoordinates]);\n\n  useEffect(() => {\n    localStorage.setItem(\"controlMode\", controlMode.name);\n  }, [controlMode]);\n\n  const handleAddRect = () => {\n    const shape = new Shape(\n      uuidv4(),\n      -viewportCoordinates.x + window.innerWidth / 2,\n      -viewportCoordinates.y + window.innerHeight / 2,\n      false\n    );\n    setShapes((state) => [...state, shape]);\n  };\n\n  useEffect(() => {\n    localStorage.setItem(\"shapes\", JSON.stringify(shapes));\n  }, [shapes]);\n\n  return (\n    <>\n      <div\n        style={{\n          position: \"absolute\",\n          border: \"1px solid black\",\n          padding: \"10px\",\n          zIndex: 1,\n          backgroundColor: \"white\"\n        }}\n      >\n        Viewport x:{viewportCoordinates.x} y:{viewportCoordinates.y}\n        <br />\n        Mouse left:{mouseLeftStateHistory.current.name} right:\n        {mouseRightStateHistory.current.name}\n        <br />\n        Canvas pan enabled:{canvasPanEnabled ? \"true\" : \"false\"}\n        <br />\n        Control mode:\n        <div>\n          <input\n            type=\"radio\"\n            value={ControlMode.Mouse.name}\n            name=\"control-mode\"\n            checked={controlMode === ControlMode.Mouse}\n            onChange={() => setControlMode(ControlMode.Mouse)}\n          />{\" \"}\n          {ControlMode.Mouse.name}\n          <input\n            type=\"radio\"\n            value={ControlMode.Trackpad.name}\n            name=\"control-mode\"\n            checked={controlMode === ControlMode.Trackpad}\n            onChange={() => setControlMode(ControlMode.Trackpad)}\n          />{\" \"}\n          {ControlMode.Trackpad.name}\n        </div>\n        Focus shape:\n        <select value=\"\" onChange={handleFocusShape}>\n          <option value=\"\" />\n          {shapes.map((shape) => {\n            return (\n              <option key={shape.id} value={shape.id}>\n                {shape.id}\n              </option>\n            );\n          })}\n        </select>\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          border: \"1px solid black\",\n          padding: \"10px\",\n          zIndex: 1,\n          top: \"200px\",\n          backgroundColor: \"white\"\n        }}\n      >\n        <button onClick={() => handleAddRect()}>Add Rect</button>\n      </div>\n      <Stage width={window.innerWidth - 20} height={window.innerHeight - 20}>\n        <Layer>\n          {shapes.map((shape) => (\n            <Group\n              key={shape.id}\n              x={shape.x + viewportCoordinates.x}\n              y={shape.y + viewportCoordinates.y}\n              draggable\n              onDragStart={() => {\n                setShapes((shapes) =>\n                  shapes.map((el) =>\n                    el.id === shape.id ? { ...el, dragging: true } : el\n                  )\n                );\n              }}\n              onDragEnd={(event) => {\n                setShapes((shapes) =>\n                  shapes.map((el) =>\n                    el.id === shape.id\n                      ? {\n                          ...el,\n                          dragging: false,\n                          x: event.target.x() - viewportCoordinates.x,\n                          y: event.target.y() - viewportCoordinates.y\n                        }\n                      : el\n                  )\n                );\n              }}\n            >\n              <Rect\n                width={shapeEdgeLength}\n                height={shapeEdgeLength}\n                fill={shape.dragging ? \"black\" : \"green\"}\n              />\n              <Text\n                x={shapeEdgeLength / 4}\n                y={shapeEdgeLength / 6}\n                text={shape.id}\n                fill={shape.dragging ? \"green\" : \"black\"}\n                wrap=\"char\"\n                width={shapeEdgeLength / 2}\n              />\n            </Group>\n          ))}\n        </Layer>\n      </Stage>\n    </>\n  );\n};\n\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}