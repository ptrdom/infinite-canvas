(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){e.exports=t(17)},17:function(e,n,t){"use strict";t.r(n);var r=t(12),u=t(5),o=t(2),a=t(1),i=t(3),c=t.n(i),d=t(13),s=t(8),l=new(t(15).a),f=function e(n){Object(a.a)(this,e),this.name=n};f.Mouse=new f("mouse"),f.Trackpad=new f("trackpad");var m=function e(n,t,r,u){Object(a.a)(this,e),this.id=n,this.x=t,this.y=r,this.dragging=u},v=function e(n){Object(a.a)(this,e),this.name=n};v.Up=new v("up"),v.Down=new v("down"),v.Hold=new v("hold");var p=function(){function e(n,t){Object(a.a)(this,e),this.previous=n,this.current=t}return Object(o.a)(e,[{key:"enqueue",value:function(n){return new e(this.current,n)}}]),e}();p.Initial=new p(null,v.Up);var b=function e(n,t,r){Object(a.a)(this,e),this.downEventListenerType=n,this.upEventListenerType=t,this.buttonCode=r};function w(e){var n=Object(i.useState)(p.Initial),t=Object(u.a)(n,2),r=t[0],o=t[1],a=c.a.useRef(null);return Object(i.useEffect)(function(){var n=function(n){n.button===e.buttonCode&&(o(function(e){return e.enqueue(v.Down)}),a.current||(a.current=setInterval(function(){o(function(e){return e.enqueue(v.Hold)})},100)))};return document.addEventListener(e.downEventListenerType,n),function(){return document.removeEventListener(e.downEventListenerType,n)}},[]),Object(i.useEffect)(function(){var n=function(n){n.button===e.buttonCode&&(a.current&&(clearInterval(a.current),a.current=null),o(function(e){return e.enqueue(v.Up)}))};return document.addEventListener(e.upEventListenerType,n),function(){return document.removeEventListener(e.upEventListenerType,n)}},[]),r}b.MouseLeft=new b("mousedown","mouseup",0),b.MouseRight=new b("mousedown","mouseup",2);var h=function(){var e=Object(i.useState)([new m("id-1",312,326,!1),new m("id-2",253,123,!1),new m("id-3",121,267,!1)]),n=Object(u.a)(e,2),t=n[0],o=n[1],a=Object(i.useState)({x:0,y:0}),d=Object(u.a)(a,2),p=d[0],h=d[1],E=w(b.MouseLeft),g=w(b.MouseRight),y=Object(i.useState)(!1),j=Object(u.a)(y,2),O=j[0],x=j[1],k=Object(i.useState)(function(){var e=l.get("controlMode");if(e){var n=f[Object.keys(f).find(function(n){return n.toLowerCase()===e})];return console.log(n),n}return f.Mouse}),L=Object(u.a)(k,2),M=L[0],T=L[1];Object(i.useEffect)(function(){if(M===f.Trackpad){var e=function(e){h(function(n){return{x:n.x+-e.deltaX,y:n.y+-e.deltaY}})};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}},[M]),Object(i.useEffect)(function(){var e=function(e){e.preventDefault()};return document.addEventListener("contextmenu",e),function(){return document.removeEventListener("contextmenu",e)}},[]),Object(i.useEffect)(function(){x(g.current===v.Hold)},[g]),Object(i.useEffect)(function(){if(O){var e=function(e){h(function(n){return{x:n.x+e.movementX,y:n.y+e.movementY}})};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}},[O]);var C=function(e){T(e),l.set("controlMode",e.name)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{position:"fixed",border:"1px solid black",zIndex:1,backgroundColor:"white"}},"Viewport x:",p.x," y:",p.y,c.a.createElement("br",null),"Mouse left:",E.current.name," right:",g.current.name,c.a.createElement("br",null),"Canvas pan enabled:",O?"true":"false",c.a.createElement("br",null),"Control mode:",c.a.createElement("div",null,c.a.createElement("input",{type:"radio",value:f.Mouse.name,name:"control-mode",checked:M===f.Mouse,onChange:function(){return C(f.Mouse)}})," ",f.Mouse.name,c.a.createElement("input",{type:"radio",value:f.Trackpad.name,name:"control-mode",checked:M===f.Trackpad,onChange:function(){return C(f.Trackpad)}})," ",f.Trackpad.name),"Focus shape:",c.a.createElement("select",{value:"",onChange:function(e){var n=t.find(function(n){return n.id===e.target.value});if(!n)throw new Error("Failed to find shape by id.");h({x:-n.x-50+window.innerWidth/2,y:-n.y-50+window.innerHeight/2})}},c.a.createElement("option",{value:""}),t.map(function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.id)}))),c.a.createElement(s.d,{width:window.innerWidth-10,height:window.innerHeight-10},c.a.createElement(s.b,null,t.map(function(e){return c.a.createElement(s.a,{key:e.id,x:e.x+p.x,y:e.y+p.y,draggable:!0,onDragStart:function(){o(function(n){return n.map(function(n){return n.id===e.id?Object(r.a)({},n,{dragging:!0}):n})})},onDragEnd:function(n){o(function(t){return t.map(function(t){return t.id===e.id?Object(r.a)({},t,{dragging:!1,x:n.target.x()-p.x,y:n.target.y()-p.y}):t})})}},c.a.createElement(s.c,{width:100,height:100,fill:e.dragging?"black":"green"}),c.a.createElement(s.e,{x:8,y:40,text:e.id,fill:e.dragging?"green":"black"}))}))))};Object(d.render)(c.a.createElement(h,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.8ee3c8df.chunk.js.map