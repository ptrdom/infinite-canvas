(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,n,t){e.exports=t(19)},19:function(e,n,t){"use strict";t.r(n);var r=t(14),u=t(12),o=t(5),a=t(2),i=t(1),c=t(3),d=t.n(c),l=t(15),s=t(8),f=new(t(17).a),m=function e(n){Object(i.a)(this,e),this.name=n};m.Mouse=new m("mouse"),m.Trackpad=new m("trackpad");var v=function e(n,t,r,u){Object(i.a)(this,e),this.id=n,this.x=t,this.y=r,this.dragging=u},b=function e(n){Object(i.a)(this,e),this.name=n};b.Up=new b("up"),b.Down=new b("down"),b.Hold=new b("hold");var p=function(){function e(n,t){Object(i.a)(this,e),this.previous=n,this.current=t}return Object(a.a)(e,[{key:"enqueue",value:function(n){return new e(this.current,n)}}]),e}();p.Initial=new p(null,b.Up);var w=function e(n,t,r){Object(i.a)(this,e),this.downEventListenerType=n,this.upEventListenerType=t,this.buttonCode=r};function h(e){var n=Object(c.useState)(p.Initial),t=Object(o.a)(n,2),r=t[0],u=t[1],a=d.a.useRef(null);return Object(c.useEffect)(function(){var n=function(n){n.button===e.buttonCode&&(u(function(e){return e.enqueue(b.Down)}),a.current||(a.current=setInterval(function(){u(function(e){return e.enqueue(b.Hold)})},100)))};return document.addEventListener(e.downEventListenerType,n),function(){return document.removeEventListener(e.downEventListenerType,n)}},[]),Object(c.useEffect)(function(){var n=function(n){n.button===e.buttonCode&&(a.current&&(clearInterval(a.current),a.current=null),u(function(e){return e.enqueue(b.Up)}))};return document.addEventListener(e.upEventListenerType,n),function(){return document.removeEventListener(e.upEventListenerType,n)}},[]),r}w.MouseLeft=new w("mousedown","mouseup",0),w.MouseRight=new w("mousedown","mouseup",2);var g=function(){var e=Object(c.useState)(4),n=Object(o.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)([new v(1,312,326,!1),new v(2,253,123,!1),new v(3,121,267,!1)]),l=Object(o.a)(i,2),p=l[0],g=l[1],E=Object(c.useState)({x:0,y:0}),y=Object(o.a)(E,2),j=y[0],x=y[1],O=h(w.MouseLeft),k=h(w.MouseRight),L=Object(c.useState)(!1),M=Object(o.a)(L,2),C=M[0],T=M[1],S=Object(c.useState)(function(){var e=f.get("controlMode");if(e){var n=m[Object.keys(m).find(function(n){return n.toLowerCase()===e})];return console.log(n),n}return m.Mouse}),I=Object(o.a)(S,2),H=I[0],D=I[1];Object(c.useEffect)(function(){if(H===m.Trackpad){var e=function(e){x(function(n){return{x:n.x+-e.deltaX,y:n.y+-e.deltaY}})};return document.addEventListener("wheel",e),function(){return document.removeEventListener("wheel",e)}}},[H]),Object(c.useEffect)(function(){var e=function(e){e.preventDefault()};return document.addEventListener("contextmenu",e),function(){return document.removeEventListener("contextmenu",e)}},[]),Object(c.useEffect)(function(){T(k.current===b.Hold)},[k]),Object(c.useEffect)(function(){if(C){var e=function(e){x(function(n){return{x:n.x+e.movementX,y:n.y+e.movementY}})};return document.addEventListener("mousemove",e),function(){return document.removeEventListener("mousemove",e)}}},[C]);var q=function(e){D(e),f.set("controlMode",e.name)};return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{style:{position:"absolute",border:"1px solid black",padding:"10px",zIndex:1,backgroundColor:"white"}},"Viewport x:",j.x," y:",j.y,d.a.createElement("br",null),"Mouse left:",O.current.name," right:",k.current.name,d.a.createElement("br",null),"Canvas pan enabled:",C?"true":"false",d.a.createElement("br",null),"Control mode:",d.a.createElement("div",null,d.a.createElement("input",{type:"radio",value:m.Mouse.name,name:"control-mode",checked:H===m.Mouse,onChange:function(){return q(m.Mouse)}})," ",m.Mouse.name,d.a.createElement("input",{type:"radio",value:m.Trackpad.name,name:"control-mode",checked:H===m.Trackpad,onChange:function(){return q(m.Trackpad)}})," ",m.Trackpad.name),"Focus shape:",d.a.createElement("select",{value:"",onChange:function(e){var n=p.find(function(n){return n.id.toString()===e.target.value});if(!n)throw new Error("Failed to find shape by id.");x({x:-n.x-50+window.innerWidth/2,y:-n.y-50+window.innerHeight/2})}},d.a.createElement("option",{value:""}),p.map(function(e){return d.a.createElement("option",{key:e.id,value:e.id},e.id)}))),d.a.createElement("div",{style:{position:"absolute",border:"1px solid black",padding:"10px",zIndex:1,top:"200px",backgroundColor:"white"}},d.a.createElement("button",{onClick:function(){return function(){var e=new v(t,-j.x+window.innerWidth/2,-j.y+window.innerHeight/2,!1);a(function(e){return e+1}),g(function(n){return[].concat(Object(u.a)(n),[e])})}()}},"Add Rect")),d.a.createElement(s.d,{width:window.innerWidth-20,height:window.innerHeight-20},d.a.createElement(s.b,null,p.map(function(e){return d.a.createElement(s.a,{key:e.id,x:e.x+j.x,y:e.y+j.y,draggable:!0,onDragStart:function(){g(function(n){return n.map(function(n){return n.id===e.id?Object(r.a)({},n,{dragging:!0}):n})})},onDragEnd:function(n){g(function(t){return t.map(function(t){return t.id===e.id?Object(r.a)({},t,{dragging:!1,x:n.target.x()-j.x,y:n.target.y()-j.y}):t})})}},d.a.createElement(s.c,{width:100,height:100,fill:e.dragging?"black":"green"}),d.a.createElement(s.e,{x:8,y:40,text:e.id,fill:e.dragging?"green":"black"}))}))))};Object(l.render)(d.a.createElement(g,null),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.e18b42a9.chunk.js.map